<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Verification Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            font-family: 'Orbitron', monospace;
            color: #00ffff;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid #00ffff;
        }
        
        .result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: bold;
        }
        
        .success {
            background: rgba(0, 255, 0, 0.2);
            border: 1px solid #00ff00;
            color: #00ff00;
        }
        
        .error {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff0000;
            color: #ff0000;
        }
        
        .slot-group {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .slot-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffff00;
        }
        
        .card-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .card-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 5px;
            font-size: 14px;
        }
        
        .card-icon {
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîß Icon Verification Test</h1>
        <p>Testing that all card icons match their corresponding slot types</p>
        
        <div id="results">
            <!-- Results will be populated by JavaScript -->
        </div>
        
        <div id="details">
            <!-- Detailed breakdown will be populated by JavaScript -->
        </div>
    </div>

    <script type="module">
        import { CARD_TYPES, CARD_ICONS, CARD_DISPLAY_NAMES } from '/js/ship/NFTCard.js';
        
        // Expected slot mappings based on the simplified system
        const EXPECTED_SLOT_MAPPINGS = {
            'üöÄ': 'Engine',      // Engine cards
            'üõ°Ô∏è': 'Armor',       // Armor/defense cards  
            '‚öîÔ∏è': 'Weapon',      // All weapon cards
            '‚ö°': 'Power',       // Power/reactor cards
            'üîß': 'Utility'      // Utility cards (sensors, comms, targeting, cargo, experimental)
        };
        
        // Cards that should use each icon
        const EXPECTED_CARD_MAPPINGS = {
            'üöÄ': [
                CARD_TYPES.IMPULSE_ENGINES, CARD_TYPES.WARP_DRIVE,
                CARD_TYPES.QUANTUM_DRIVE, CARD_TYPES.DIMENSIONAL_SHIFTER,
                CARD_TYPES.TEMPORAL_ENGINE, CARD_TYPES.GRAVITY_WELL_DRIVE
            ],
            'üõ°Ô∏è': [
                CARD_TYPES.HULL_PLATING, CARD_TYPES.PHASE_SHIELD,
                CARD_TYPES.ADAPTIVE_ARMOR, CARD_TYPES.QUANTUM_BARRIER,
                CARD_TYPES.TEMPORAL_DEFLECTOR
            ],
            '‚öîÔ∏è': [
                CARD_TYPES.LASER_CANNON, CARD_TYPES.PLASMA_CANNON, CARD_TYPES.PULSE_CANNON,
                CARD_TYPES.PHASER_ARRAY, CARD_TYPES.DISRUPTOR_CANNON, CARD_TYPES.PARTICLE_BEAM,
                CARD_TYPES.MISSILE_TUBES, CARD_TYPES.TORPEDO_LAUNCHER,
                CARD_TYPES.ION_STORM_CANNON, CARD_TYPES.GRAVITON_BEAM, CARD_TYPES.QUANTUM_TORPEDO,
                CARD_TYPES.SINGULARITY_LAUNCHER, CARD_TYPES.VOID_RIPPER, CARD_TYPES.NANITE_SWARM
            ],
            '‚ö°': [
                CARD_TYPES.ENERGY_REACTOR, CARD_TYPES.SHIELD_GENERATOR, CARD_TYPES.SHIELDS,
                CARD_TYPES.QUANTUM_REACTOR, CARD_TYPES.DARK_MATTER_CORE,
                CARD_TYPES.ANTIMATTER_GENERATOR, CARD_TYPES.CRYSTALLINE_MATRIX
            ],
            'üîß': [
                // Cargo systems
                CARD_TYPES.CARGO_HOLD, CARD_TYPES.REINFORCED_CARGO_HOLD, CARD_TYPES.SHIELDED_CARGO_HOLD,
                // Sensors
                CARD_TYPES.LONG_RANGE_SCANNER, CARD_TYPES.GALACTIC_CHART,
                CARD_TYPES.QUANTUM_SCANNER, CARD_TYPES.PRECOGNITION_ARRAY,
                CARD_TYPES.DIMENSIONAL_RADAR, CARD_TYPES.PSIONIC_AMPLIFIER, CARD_TYPES.NEURAL_INTERFACE,
                // Communications
                CARD_TYPES.SUBSPACE_RADIO, CARD_TYPES.VORTHAN_MIND_LINK,
                CARD_TYPES.NEXUS_HARMONIZER, CARD_TYPES.ETHEREAL_CONDUIT,
                // Targeting & Experimental
                CARD_TYPES.TARGET_COMPUTER, CARD_TYPES.ZEPHYRIAN_CRYSTAL,
                CARD_TYPES.PROBABILITY_DRIVE, CARD_TYPES.CHAOS_FIELD_GEN,
                CARD_TYPES.REALITY_ANCHOR, CARD_TYPES.ENTROPY_REVERSER
            ]
        };
        
        function runIconVerification() {
            const resultsDiv = document.getElementById('results');
            const detailsDiv = document.getElementById('details');
            
            let totalErrors = 0;
            let totalCards = 0;
            
            // Test each expected mapping
            for (const [expectedIcon, slotType] of Object.entries(EXPECTED_SLOT_MAPPINGS)) {
                const expectedCards = EXPECTED_CARD_MAPPINGS[expectedIcon] || [];
                const slotDiv = document.createElement('div');
                slotDiv.className = 'slot-group';
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'slot-title';
                titleDiv.innerHTML = `${expectedIcon} ${slotType} Slot (${expectedCards.length} cards)`;
                
                const cardListDiv = document.createElement('div');
                cardListDiv.className = 'card-list';
                
                let slotErrors = 0;
                
                expectedCards.forEach(cardType => {
                    totalCards++;
                    const actualIcon = CARD_ICONS[cardType];
                    const cardName = CARD_DISPLAY_NAMES[cardType] || cardType;
                    const isCorrect = actualIcon === expectedIcon;
                    
                    if (!isCorrect) {
                        slotErrors++;
                        totalErrors++;
                    }
                    
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card-item';
                    cardDiv.innerHTML = `
                        <span class="card-icon">${actualIcon || '‚ùì'}</span>
                        <span>${cardName}</span>
                        <span style="margin-left: auto; color: ${isCorrect ? '#00ff00' : '#ff0000'}">
                            ${isCorrect ? '‚úì' : `‚úó (expected ${expectedIcon})`}
                        </span>
                    `;
                    cardListDiv.appendChild(cardDiv);
                });
                
                // Update title with error count
                if (slotErrors > 0) {
                    titleDiv.innerHTML += ` <span style="color: #ff0000;">(${slotErrors} errors)</span>`;
                } else {
                    titleDiv.innerHTML += ` <span style="color: #00ff00;">(‚úì all correct)</span>`;
                }
                
                slotDiv.appendChild(titleDiv);
                slotDiv.appendChild(cardListDiv);
                detailsDiv.appendChild(slotDiv);
            }
            
            // Display overall results
            const overallResult = document.createElement('div');
            overallResult.className = `result ${totalErrors === 0 ? 'success' : 'error'}`;
            
            if (totalErrors === 0) {
                overallResult.innerHTML = `
                    <h2>‚úÖ ALL ICONS MATCH PERFECTLY!</h2>
                    <p>All ${totalCards} cards have the correct icons for their slot types.</p>
                    <p>üéâ The galactic chart and all other cards should now drag to the correct slots!</p>
                `;
            } else {
                overallResult.innerHTML = `
                    <h2>‚ùå ${totalErrors} ICON MISMATCHES FOUND</h2>
                    <p>${totalCards - totalErrors}/${totalCards} cards have correct icons.</p>
                    <p>Please check the detailed breakdown below.</p>
                `;
            }
            
            resultsDiv.appendChild(overallResult);
            
            console.log(`Icon verification complete: ${totalErrors} errors out of ${totalCards} cards`);
        }
        
        // Run the verification when page loads
        runIconVerification();
    </script>
</body>
</html> 