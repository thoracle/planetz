<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Icon Matching Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            font-family: 'Orbitron', monospace;
            color: #00ffff;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid #00ffff;
        }
        
        .icon-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .slot-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .slot-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #ffff00;
        }
        
        .slot-icon {
            font-size: 24px;
        }
        
        .card-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .card-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 5px;
            font-size: 14px;
        }
        
        .card-icon {
            font-size: 18px;
        }
        
        .match-status {
            font-weight: bold;
            margin-left: auto;
        }
        
        .match-yes {
            color: #00ff00;
        }
        
        .match-no {
            color: #ff0000;
        }
        
        .summary {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }
        
        .summary.success {
            border: 2px solid #00ff00;
        }
        
        .summary.failure {
            border: 2px solid #ff0000;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Card Icon Matching Test</h1>
        <p>Verifying that card icons match their corresponding ship slot icons</p>
        
        <div id="iconComparison" class="icon-comparison">
            <!-- Will be populated by JavaScript -->
        </div>
        
        <div id="summary" class="summary">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>

    <script type="module">
        import { CARD_TYPES, CARD_ICONS, CARD_DISPLAY_NAMES } from '/js/ship/NFTCard.js';
        
        // Ship slot configuration (updated to match current system)
        const SLOT_CONFIG = [
            { type: CARD_TYPES.IMPULSE_ENGINES, label: 'Engine', icon: 'üöÄ' },
            { type: CARD_TYPES.HULL_PLATING, label: 'Armor', icon: 'üõ°Ô∏è' },
            { type: CARD_TYPES.LASER_CANNON, label: 'Weapon', icon: '‚öîÔ∏è' },
            { type: CARD_TYPES.ENERGY_REACTOR, label: 'Power Core', icon: '‚ö°' },
            { type: CARD_TYPES.TARGET_COMPUTER, label: 'Utility', icon: 'üîß' }  // All utility items use this icon
        ];
        
        // Categorize cards by their expected slot type
        function categorizeCards() {
            const categories = {
                'üöÄ': [], // Engine
                'üõ°Ô∏è': [], // Armor
                '‚öîÔ∏è': [], // Weapon
                '‚ö°': [], // Power Core
                'üîß': []  // Utility (sensors, comms, targeting, cargo, experimental)
            };
            
            // Go through all card types and categorize them
            for (const cardType of Object.values(CARD_TYPES)) {
                const cardIcon = CARD_ICONS[cardType];
                if (cardIcon && categories[cardIcon]) {
                    categories[cardIcon].push({
                        type: cardType,
                        name: CARD_DISPLAY_NAMES[cardType] || cardType,
                        icon: cardIcon
                    });
                }
            }
            
            return categories;
        }
        
        function runIconMatchingTest() {
            const categories = categorizeCards();
            const comparisonDiv = document.getElementById('iconComparison');
            let totalMatches = 0;
            let totalCards = 0;
            
            // Create sections for each slot type
            SLOT_CONFIG.forEach(slot => {
                const slotCards = categories[slot.icon] || [];
                totalCards += slotCards.length;
                
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'slot-section';
                
                const headerDiv = document.createElement('div');
                headerDiv.className = 'slot-header';
                headerDiv.innerHTML = `
                    <span class="slot-icon">${slot.icon}</span>
                    <span>${slot.label} Slot</span>
                    <span style="font-size: 14px; color: #888;">(${slotCards.length} cards)</span>
                `;
                
                const cardListDiv = document.createElement('div');
                cardListDiv.className = 'card-list';
                
                if (slotCards.length === 0) {
                    cardListDiv.innerHTML = '<div class="card-item">No cards found for this slot type</div>';
                } else {
                    slotCards.forEach(card => {
                        const matches = card.icon === slot.icon;
                        if (matches) totalMatches++;
                        
                        const cardDiv = document.createElement('div');
                        cardDiv.className = 'card-item';
                        cardDiv.innerHTML = `
                            <span class="card-icon">${card.icon}</span>
                            <span>${card.name}</span>
                            <span class="match-status ${matches ? 'match-yes' : 'match-no'}">
                                ${matches ? '‚úì MATCH' : '‚úó NO MATCH'}
                            </span>
                        `;
                        cardListDiv.appendChild(cardDiv);
                    });
                }
                
                sectionDiv.appendChild(headerDiv);
                sectionDiv.appendChild(cardListDiv);
                comparisonDiv.appendChild(sectionDiv);
            });
            
            // Display summary
            const summaryDiv = document.getElementById('summary');
            const allMatch = totalMatches === totalCards;
            summaryDiv.className = `summary ${allMatch ? 'success' : 'failure'}`;
            summaryDiv.innerHTML = `
                <h2>${allMatch ? '‚úÖ ALL ICONS MATCH!' : '‚ùå ICON MISMATCHES FOUND'}</h2>
                <p><strong>${totalMatches}/${totalCards}</strong> cards have matching icons</p>
                <p>${allMatch ? 'Perfect! All card icons now match their corresponding slot icons.' : 'Some cards still have mismatched icons.'}</p>
            `;
            
            console.log(`Icon matching test complete: ${totalMatches}/${totalCards} matches`);
            console.log('Categories:', categories);
        }
        
        // Run the test when page loads
        runIconMatchingTest();
    </script>
</body>
</html> 